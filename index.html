<!DOCTYPE html>
<html lang="ne">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Aruns E-Services Portal</title>
  <style>
    *{margin:0;padding:0;box-sizing:border-box;}
    body{font-family:"Segoe UI",Arial,sans-serif;background:#f0f4fb;color:#333;height:100vh;}
    header{background:linear-gradient(90deg,#002b5c,#004b8d);color:#fff;display:flex;align-items:center;justify-content:space-between;padding:8px 20px;}
    header img{height:60px;}
    header .title{text-align:center;flex-grow:1;}
    header .title h1{font-size:22px;}
    .container{display:grid;grid-template-columns:250px 1fr;height:calc(100vh - 75px);}
    .sidebar{background:#e9eff7;border-right:2px solid #c3cbe0;padding:10px;overflow-y:auto;}
    .sidebar h3{color:#003366;margin-bottom:10px;}
    .folder>div{cursor:pointer;padding:6px 10px;border-radius:4px;display:flex;align-items:center;}
    .folder ul{margin-left:20px;margin-top:5px;list-style:none;display:none;}
    .folder.open>ul{display:block;}
    .folder ul li a{text-decoration:none;color:#003366;display:block;padding:4px 8px;border-radius:4px;}
    .folder ul li a:hover{background:#c7d7f0;}
    main{background:#fff;}
    iframe{width:100%;height:100%;border:none;}
    footer{background:#002b5c;color:#fff;text-align:center;font-size:12px;padding:6px;}
    .time-box{
      display:flex;flex-direction:column;align-items:center;padding:6px 15px;border-radius:12px;
      background:linear-gradient(135deg,#003366,#0077cc);
      border:2px solid #00ffff;
      box-shadow:0 0 15px rgba(0,255,255,0.5);
      animation:pulse 3s infinite ease-in-out;
    }
    @keyframes pulse{
      0%{box-shadow:0 0 10px rgba(0,255,255,0.4);}
      50%{box-shadow:0 0 25px rgba(0,255,255,0.9);}
      100%{box-shadow:0 0 10px rgba(0,255,255,0.4);}
    }
    .time-box .eng{font-size:15px;color:#aee2ff;}
    .time-box .nep{font-size:14px;color:#ffea91;font-weight:600;}
  </style>
</head>
<body>

<!-- âœ… à¤¸à¥€à¤§à¤¾ Main Page -->
<div id="mainPage">
  <header>
    <div style="display:flex;align-items:center;gap:10px;">
      <img src="https://upload.wikimedia.org/wikipedia/commons/a/a9/Animated-nepal-flag-image-0007.gif" alt="Nepal Flag">
      <div class="time-box">
        <div class="eng" id="engTime">Loading...</div>
        <div class="nep" id="nepTime">à¤¨à¥‡à¤ªà¤¾à¤²à¥€ à¤®à¤¿à¤¤à¤¿...</div>
      </div>
    </div>
    <div class="title">
      <h1> â²¯ï¹ï¸¿ï¹ï¸¿ï¹ ğ“¦ğ“®ğ“µğ“¬ğ“¸ğ“¶ğ“® ï¹â²¯ï¹â²¯ï¹ï¸¿ï¹â˜¼ </h1>
      <p> ğƒğšğ­ğšğ›ğšğ¬ğ ğ–ğ¢ğ­ğ¡ ğ‚ğ¥ğ¨ğ®ğ ğƒğğ©ğšğ«ğ­ğ¦ğğ§ğ­, ğ†ğ¨ğ¯ğğ«ğ§ğ¦ğğ§ğ­ ğ¨ğŸ ğğğ©ğšğ¥</p>
    </div>
    <img src="https://upload.wikimedia.org/wikipedia/commons/b/b9/Small_gif.gif" alt="Logo">
  </header>

  <div class="container">
    <div class="sidebar">
      <h3>ğğ§ğ¥ğ¢ğ§ğ ğ„-ğ’ğğ«ğ¯ğ¢ğœğğ¬</h3>
      <!-- Sidebar folders/content à¤¯à¤¹à¤¾à¤ à¤°à¤¾à¤–à¥à¤¨à¥à¤¹à¥‹à¤¸à¥ -->
    </div>
    <main><iframe name="contentFrame" id="contentFrame"></iframe></main>
  </div>
  <footer>Â© 2025 Database With Cloud Department, Government of Nepal</footer>
</div>

<!-- ğŸ” Data Backup Panel (à¤œà¤¸à¥à¤¤à¤¾à¤•à¥‹ à¤¤à¤¸à¥à¤¤à¥ˆ à¤°à¤¹à¥à¤¯à¥‹) -->
<div style="margin:30px auto; text-align:center; background:#eef6ff; padding:20px; width:90%; max-width:600px; border-radius:20px; box-shadow:0 4px 10px rgba(0,0,0,0.1); font-family:Arial;">
  <h2 style="color:#0077cc;">ğŸ” Data Backup & Restore</h2>
  <button id="backupBtn" style="background:#0077cc;color:white;border:none;padding:10px 25px;margin:10px;border-radius:8px;cursor:pointer;font-size:15px;">ğŸ’¾ Backup Data</button>
</div>

<script>
// âœ… à¤¸à¤®à¤¯ à¤¦à¥‡à¤–à¤¾à¤‰à¤¨à¥‡ Function
function updateTime(){
  const now = new Date();
  document.getElementById('engTime').textContent = now.toLocaleString('en-GB');
  document.getElementById('nepTime').textContent = 'à¤¨à¥‡à¤ªà¤¾à¤²à¥€ à¤®à¤¿à¤¤à¤¿ à¤…à¤ªà¤¡à¥‡à¤Ÿ à¤¹à¥à¤à¤¦à¥ˆà¤›...';
}
setInterval(updateTime,1000);
updateTime();

// âœ… GitHub à¤®à¤¾ à¤¡à¥‡à¤Ÿà¤¾ à¤ªà¤ à¤¾à¤‰à¤¨à¥‡ function
async function saveToGitHub(filename, content) {
  const GITHUB_USERNAME = "dreamwaver2020";
  const REPO_NAME = "arun1";
  const TOKEN = "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"; // ğŸ‘‰ à¤¯à¤¹à¤¾à¤ à¤†à¤«à¥à¤¨à¥‹ token à¤°à¤¾à¤–à¥à¤¨à¥à¤¹à¥‹à¤¸à¥

  const apiUrl = `https://api.github.com/repos/${GITHUB_USERNAME}/${REPO_NAME}/contents/${filename}`;
  const encodedContent = btoa(unescape(encodeURIComponent(content)));

  const response = await fetch(apiUrl, {
    method: "PUT",
    headers: {
      "Authorization": `token ${TOKEN}`,
      "Content-Type": "application/json"
    },
    body: JSON.stringify({
      message: "Auto backup from E-Service portal",
      content: encodedContent
    })
  });

  if (response.ok) {
    alert("âœ… Data saved to GitHub repository successfully!");
  } else {
    alert("âŒ Failed to save data to GitHub!");
  }
}

// âœ… Backup button event
document.getElementById('backupBtn').addEventListener('click', async () => {
  if (localStorage.length === 0) {
    alert("âŒ LocalStorage à¤®à¤¾ à¤¹à¤¾à¤² à¤•à¥à¤¨à¥ˆ à¤¡à¥‡à¤Ÿà¤¾ à¤›à¥ˆà¤¨!");
    return;
  }

  const allData = {};
  for (let i = 0; i < localStorage.length; i++) {
    const key = localStorage.key(i);
    allData[key] = localStorage.getItem(key);
  }

  // à¤¸à¥à¤¥à¤¾à¤¨à¥€à¤¯ JSON à¤¡à¤¾à¤‰à¤¨à¤²à¥‹à¤¡
  const blob = new Blob([JSON.stringify(allData, null, 2)], { type: "application/json" });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = "backup_" + new Date().toISOString().split('T')[0] + ".json";
  a.click();
  URL.revokeObjectURL(url);

  // GitHub à¤®à¤¾ à¤…à¤ªà¤²à¥‹à¤¡
  await saveToGitHub("auto_backup.json", JSON.stringify(allData, null, 2));

  alert("âœ… Backup Completed (Local + GitHub)");
});
</script>

</body>
</html>
